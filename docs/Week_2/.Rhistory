.groups = "drop")
weather |>
summarize(mean = mean(temp, na.rm = TRUE),
std_dev = sd(temp, na.rm = TRUE),
.by = day)
head(flights)
flights |>
summarise(count = n(),
.by = c(carrier,origin))
flights |>
summarise(count = n(na.rm=T),
.by = c(carrier,origin))
flights |>
summarise(count = n(),
.by = c(origin,carrier))
View(flights |>
summarise(count = n(),
.by = c(origin,carrier)))
flights |>
summarise(count = n(),
.by = c(origin,carrier)) |> table()
flights |>
summarise(count = n(),
.by = c(origin,carrier))
flights |>
summarise(count = n(),
.by = c(origin,carrier)) |>
ggplot(aes(x = carrier, y = count, fill = origin)) + geom_bar()
flights |>
summarise(count = n(),
.by = c(origin,carrier)) |>
ggplot(aes(x = carrier, y = count, fill = origin)) + geom_col()
conflicted::conflict_scout()
?select
flights |>
select(dep_delay, arr_delay, gain)
flights <- flights |>
mutate(gain = dep_delay - arr_delay)
flights |>
select(dep_delay, arr_delay, gain)
flights |>
summarise_at(gain,.fns = list(
min = min,
q1 = ~quantile(., 0.25),
median = ~quantile(., 0.5),
q3 = ~quantile(., 0.75),
max = max,
mean = mean,
sd = sd,
missing = ~sum(is.na(.))),na.rm=T)
flights |>
summarise_at("gain",.fns = list(
min = min,
q1 = ~quantile(., 0.25),
median = ~quantile(., 0.5),
q3 = ~quantile(., 0.75),
max = max,
mean = mean,
sd = sd,
missing = ~sum(is.na(.))),na.rm=T)
flights |>
summarise_at("gain",.funs = list(
min = min,
q1 = ~quantile(., 0.25),
median = ~quantile(., 0.5),
q3 = ~quantile(., 0.75),
max = max,
mean = mean,
sd = sd,
missing = ~sum(is.na(.))),na.rm=T)
flights |>
summarise_at("gain",.funs = list(
min = min,
q1 = ~quantile(., 0.25),
median = ~quantile(., 0.5),
q3 = ~quantile(., 0.75),
max = max,
mean = mean,
sd = sd),na.rm=T)
lights |>
summarise_at(.vars = "gain",
.funs = list(
min = min,
q1 = ~quantile(., 0.25),
median = ~quantile(., 0.5),
q3 = ~quantile(., 0.75),
max = max,
mean = mean,
sd = sd),na.rm=TRUE)
flights |>
summarise_at(.vars = "gain",
.funs = list(
min = min,
q1 = ~quantile(., 0.25),
median = ~quantile(., 0.5),
q3 = ~quantile(., 0.75),
max = max,
mean = mean,
sd = sd),na.rm=TRUE)
flights |>
summarise_at(.vars = "gain",
.funs = list(
min = min,
q1 = ~quantile(., 0.25, na.rm = TRUE)),
median = ~quantile(., 0.5, na.rm = TRUE)),
flights |>
summarise_at(.vars = "gain",
.funs = list(
min = min,
q1 = ~quantile(., 0.25, na.rm = TRUE),
median = ~quantile(., 0.5, na.rm = TRUE),
q3 = ~quantile(., 0.75, na.rm = TRUE),
max = max,
mean = mean,
sd = sd),na.rm=TRUE)
flights |>
summarise_at(.vars = "gain",
.funs = list(
min = min,
q1 = ~quantile(., 0.25, na.rm = TRUE),
median = ~quantile(., 0.5, na.rm = TRUE),
q3 = ~quantile(., 0.75, na.rm = TRUE),
max = max,
mean = mean,
sd = sd,
missing = ~sum(is.na(.))),na.rm=TRUE)
flights |>
summarize(
min = min(gain, na.rm = TRUE),
q1 = quantile(gain, 0.25, na.rm = TRUE),
median = quantile(gain, 0.5, na.rm = TRUE),
q3 = quantile(gain, 0.75, na.rm = TRUE),
max = max(gain, na.rm = TRUE),
mean = mean(gain, na.rm = TRUE),
sd = sd(gain, na.rm = TRUE),
missing = sum(is.na(gain))
)
flights |>
summarize(
min = min(gain, na.rm = F),
q1 = quantile(gain, 0.25, na.rm = TRUE),
median = quantile(gain, 0.5, na.rm = TRUE),
q3 = quantile(gain, 0.75, na.rm = TRUE),
max = max(gain, na.rm = TRUE),
mean = mean(gain, na.rm = TRUE),
sd = sd(gain, na.rm = TRUE),
missing = sum(is.na(gain))
)
flights <- flights |>
mutate(
gain = dep_delay - arr_delay,
hours = air_time / 60,
gain_per_hour = gain / hours
)
flights
head(flights)
head(flights |>
mutate(dep_delay  = sched_dep_time - dep_time ,
arr_delay  = sched_dep_time - arr_time))
head(flights)
head(flights |>
mutate(dep_delay  = sched_dep_time - dep_time ,
arr_delay  = sched_arr_time  - arr_time))
923         -   850
542+160
?flights
freq_dest |>
arrange(desc(num_flights))
freq_dest <- flights %>%
group_by(dest) %>%
summarize(num_flights = n())
freq_dest
freq_dest <- flights |>
summarize(num_flights = n(),
.by = dest)
freq_dest
freq_dest |>
arrange(num_flights)
freq_dest |>
arrange(desc(num_flights))
airlines
flights |>
inner_join(airlines,
join_by = carrier)
flights |>
inner_join(airlines,
by = join_by(carrier)
)
head(airports)
head(airports)
head(flights)
flights |>
inner_join(airports,
by = join_by(dest == faa))
View(flights |>
inner_join(airports,
by = join_by(dest == faa)))
named_dests <- flights|>
summarize(num_flights = n(),
.by = dest) |>
arrange(desc(num_flights)) |>
inner_join(airports, by = join_by(dest == faa)) %>%
rename(airport_name = name)
named_dests
flights
View(named_dests)
flights|>
summarize(num_flights = n(),
.by = dest)
airports
flights |>
inner_join(weather,
by = join_by(year,month,day,hour,origin))
flights |>
inner_join(weather,
by = join_by(hour))
flights |>
select(month:dep_time, arr_time:sched_arr_time)
named_dests |>
top_n(n = 10, wt = num_flights)
ten_freq_dests <- flights |>
summarize(num_flights = n(),
.by = dest) |>
arrange(desc(num_flights)) |>
top_n(n = 10)
ten_freq_dests
named_dests
ten_freq_dests
weather
weather$temp |> summary()
weather |>
reframe( temp_cat = quantile(temp,c(0.25,0.75,na.rm=T)))
weather |>
reframe( temp_cat = quantile(temp,c(0.25,0.75),na.rm=T))
weather |>
mutate(
temp_cat = case_when(
is.na(temp) ~ NA,
temp < 39.9 ~ "low",
between(temp,39.9 ,70)~ "medium",
.default = "large"
)
) |>
relocate(temp,temp_cat)
View(weather |>
mutate(
temp_cat = case_when(
is.na(temp) ~ NA,
temp < 39.9 ~ "low",
between(temp,39.9 ,70)~ "medium",
.default = "large"
)
) |>
relocate(temp,temp_cat))
weather
weather |>
mutate(
temp_cat = case_when(
is.na(temp) ~ NA,
temp < 39.9 ~ "low",
between(temp,39.9 ,70)~ "medium",
.default = "large"
)
) |>
relocate(temp,temp_cat)
summary(weather$wind_speed)
summary(weather$precip)
summary(weather$visib)
View(weather)
summary(weather$temp)
weather |>
mutate(
extreme_weather  = case_when(
is.na(temp)|is.na(wind_speed) ~ NA,
temp < 50 & wind_speed  > 20~ "extreme",
.default = "not extreme"
)
)
weather |>
mutate(
extreme_weather  = case_when(
is.na(temp)|is.na(wind_speed) ~ NA,
temp < 50 & wind_speed  > 20~ "extreme",
.default = "not extreme"
)
) relocate(extreme_weather,temp,wind_speed)
weather |>
mutate(
extreme_weather  = case_when(
is.na(temp)|is.na(wind_speed) ~ NA,
temp < 50 & wind_speed  > 20~ "extreme",
.default = "not extreme"
)
) |>
relocate(extreme_weather,temp,wind_speed)
weather |>
mutate(
extreme_weather  = case_when(
is.na(temp)|is.na(wind_speed) ~ NA,
temp < 40 & wind_speed  > 20~ "extreme",
.default = "not extreme"
)
) |>
relocate(extreme_weather,temp,wind_speed)
weather |>
mutate(
extreme_weather  = case_when(
is.na(temp)|is.na(wind_speed) ~ NA,
temp < 40 & wind_speed  > 20~ "extreme",
.default = "not extreme"
)
) |>
relocate(extreme_weather,temp,wind_speed)
weather |>
mutate(
extreme_weather  = case_when(
is.na(temp)|is.na(wind_speed) ~ NA,
temp < 40 & wind_speed  > 10~ "extreme",
.default = "not extreme"
)
) |>
relocate(extreme_weather,temp,wind_speed)
weather |>
mutate(
extreme_weather  = case_when(
is.na(temp)|is.na(wind_speed) ~ NA,
temp < 40 & wind_speed  > 64~ "extreme",
.default = "not extreme"
)
) |>
relocate(extreme_weather,temp,wind_speed) |>
arrange(wind_speed)
weather |>
mutate(
extreme_weather  = case_when(
is.na(temp)|is.na(wind_speed) ~ NA,
temp < 40 & wind_speed  > 64~ "extreme",
.default = "not extreme"
)
) |>
relocate(extreme_weather,temp,wind_speed) |>
arrange(desc(wind_speed))
head(flights)
#
flights |>
select(contains("dep"))
head(flights)
flights$origin |> unique()
flights$year |> unique()
flights$arr_delay|>mean()
flights|>
summarize(mean_arr_delay = mean(arr_delay,na.rm=T),
.by = dest) |>
arrange(desc(mean_arr_delay))
flights|>
summarize(mean_arr_delay = mean(arr_delay,na.rm=T),
.by = dest) |>
arrange(desc(mean_arr_delay)) |>
inner_join(airports, by = join_by(dest == faa)) %>%
rename(airport_name = name)
flights|>
summarize(mean_arr_delay = mean(arr_delay,na.rm=T),
.by = dest) |>
arrange(desc(mean_arr_delay)) |>
inner_join(airports, by = join_by(dest == faa)) %>%
rename(airport_name = name) |?
top_n(n=5,wt = mean_arr_delay)
flights|>
summarize(mean_arr_delay = mean(arr_delay,na.rm=T),
.by = dest) |>
arrange(desc(mean_arr_delay)) |>
inner_join(airports, by = join_by(dest == faa)) |>
rename(airport_name = name) |>
top_n(n=5,wt = mean_arr_delay)
flights|>
summarize(mean_arr_delay = mean(arr_delay,na.rm=T),
.by = dest) |>
inner_join(airports, by = join_by(dest == faa)) |>
rename(airport_name = name) |>
top_n(n=5,wt = mean_arr_delay)
flights|>
summarize(mean_arr_delay = mean(arr_delay,na.rm=T),
.by = dest) |>
arrange(desc(mean_arr_delay))
flights|>
summarize(mean_arr_delay = mean(arr_delay,na.rm=T),
.by = dest) |>
arrange(desc(mean_arr_delay)) |>
inner_join(airports, by = join_by(dest == faa)) |>
rename(airport_name = name) |>
slice_max(mean_arr_delay,n=5)
flights|>
summarize(mean_arr_delay = mean(arr_delay,na.rm=T),
.by = dest) |>
#arrange(desc(mean_arr_delay)) |>
inner_join(airports, by = join_by(dest == faa)) |>
rename(airport_name = name) |>
slice_max(mean_arr_delay,n=5)
flights|>
summarize(mean_arr_delay = mean(arr_delay,na.rm=T),
.by = dest) |>
inner_join(airports, by = join_by(dest == faa)) |>
rename(airport_name = name) |>
slice_max(mean_arr_delay,n=5)
named_dests |>
slice_max(num_flights, n = 10)
flights |>
summarize(num_flights = n(),
.by = dest) |>
arrange(desc(num_flights))
flights |>
summarize(num_flights = n(),
.by = dest) |>
slice_max(num_flights, n = 10)
4*4
26/7
2*3
20/4
26-9
17/4
4*2
22/4
18/4
4*3
26-12
14/3
4*2
26-8
18/3
4*3
26-12
14/3
14/4
17/3
26-12
14/3
26-8
18/3
usethis::create_github_token()
library(tidyverse)
library(ggplot2)
library(nycflights13)
library(readr)
library(knitr)
library(fivethirtyeight)
#Further Task 1.1 Solution
US_births_2013 <- US_births_2000_2014 |> filter(year == 2013)
#Further Task 1.2 Solution
US_births_small <- US_births_2000_2014 |>
filter(year %in% c(2010, 2011, 2012, 2014))
US_births_small <- US_births_2000_2014 |>
filter(!(year %in% c(2000:2009, 2013, 2015)))
US_births_small <- US_births_2000_2014 |>
filter(year == 2010 | year == 2011 | year == 2012 | year == 2014)
#Further Task 1.3 Solution
US_births_weekdays_2013 <- US_births_2000_2014 |>
filter(!(day_of_week %in% c('Sat','Sun')), year==2013)
# You could also use & instead of the last comma, i.e.
US_births_weekdays_2013 <- US_births_2000_2014 |>
filter(!(day_of_week %in% c('Sat','Sun')) & year==2013)
#Further Task 1.4 Solution
ggplot(US_births_weekdays_2013, aes(x=date,y=births, color=day_of_week))+
geom_line()+
labs(x='Date', y='Number of births',
title='Number US births on week days in 2013')
#Further Task 1.5 Solution
birth_summ <- US_births_weekdays_2013 |>
summarize(mean_births =  mean(births),
median_births = median(births))
birth_summ
#Further Task 1.6 Solution
birth_day_summ <- US_births_weekdays_2013 |>
summarize( mean_births =  mean(births),
median_births = median(births),.by = c(day_of_week))
birth_day_summ
#Further Task 1.7 Solution
ggplot(birth_day_summ, aes(x=day_of_week,y=mean_births, fill=day_of_week))+
geom_col()+
labs(x='Day of Week', y='Average number of births',
title='Average US births by weekday, 2013')+
guides(fill=FALSE)
#Further Task 1.7 Solution
ggplot(birth_day_summ, aes(x=day_of_week,y=mean_births, fill=day_of_week))+
geom_col()+
labs(x='Day of Week', y='Average number of births',
title='Average US births by weekday, 2013')
#Further Task 1.7 Solution
ggplot(birth_day_summ, aes(x=day_of_week,y=mean_births, fill=day_of_week))+
geom_col(show.legend = FALSE)+
labs(x='Day of Week', y='Average number of births',
title='Average US births by weekday, 2013')
#Further Task 2.1 Solution
two_group_prop_1 <- flying |>
summarize(prop_very = mean(recline_rude=='Very', na.rm=TRUE),
.by=c(day_of_week))
#Further Task 2.1 Solution
two_group_prop_1 <- flying |>
summarize(prop_very = mean(recline_rude=='Very', na.rm=TRUE),
.by=c(gender,age))
#OR
two_group_prop_2 <- flying |>
na.omit(TRUE) |>
group_by(gender,age) |>
summarize(prop_very = mean(recline_rude=='Very'))
#OR
two_group_prop_2 <- flying |>
na.omit(TRUE) |>
summarize(prop_very = mean(recline_rude=='Very'),
.by = c(gender,age))
#Compare the two summaries...
two_group_prop_1
two_group_prop_2
